<?xml version="1.0" encoding="UTF-8"?>
<project name="project" default="default">

	<property name="version" value="0.0.1"/>
	
	<property name="name" value="etkk_${version}"/>
	
	<target name="default"></target>
	
	<target name="export">

    	<replace file="../Common/src/com/ekinoksyazilim/prototype/configuration/ConfigurationService.java" 
    		token="X.X.X" value="${version}"/>
		
    	<replace file="../Rodeo/src/tr/com/t2/matador/rodeo/main/RodeoMainWindow.java" 
    		token="X.X.X" value="${version}"/>
		
		<pde.exportPlugins destination="/Users/safakburakcevikbas/Desktop/T2/MATADOR/workspace/Deployment" 
			exportSource="false" exportType="directory" 
			plugins="jogl-plugin,KSSArayuz,MatadorApplication,MatadorAyr,MatadorCfr,MatadorCommons,
					MatadorCommunication,MatadorIff,MatadorPlt,MatadorRapor,MatadorScope,radar.ASkop,radar.AtisTanzimSkop,
					radar.BCSkop,radar.BSkop,radar.CSkop,radar.PPISkop,Rodeo,SkopTest" useJARFormat="true"/>
	</target>
	
    <target name="pack">
    	
    	<delete dir="${name}"/>
    	
    	<delete dir="${name}.zip"/>
    	
    	<mkdir dir="${name}"/>
    	
    	<copy toDir="${name}/MATADOR">
    		<fileset dir="MATADOR"/>
    	</copy>
    	
    	<copy toDir="${name}/RODEO">
    		<fileset dir="RODEO"/>
    	</copy>
    	
    	<delete>
    		<fileset dir="${name}/MATADOR" includes="*config.xml"/>
    		<fileset dir="${name}/MATADOR" includes="*.log"/>
    		<fileset dir="${name}/RODEO" includes="*config.xml"/>
    		<fileset dir="${name}/RODEO" includes="*.log"/>
    	</delete>
    	
    	<delete includeemptydirs="true">
    		<fileset dir="${name}/MATADOR/arayuzKayitlari" includes="**/*"/>
    	</delete>
    	
    	<copy toDir="${name}/MATADOR/plugins">
    		<fileset dir="plugins" includes="jogl-plugin*"/>
    		<fileset dir="plugins" includes="KSSArayuz*"/>
    		<fileset dir="plugins" includes="radar.ASkop*"/>
    		<fileset dir="plugins" includes="radar.BSkop*"/>
    		<fileset dir="plugins" includes="radar.CSkop*"/>
    		<fileset dir="plugins" includes="radar.PPISkop*"/>
    		<fileset dir="plugins" includes="Matador*"/>
    	</copy>

    	<copy toDir="${name}/messages">
    		<fileset dir="../MessagesGenerator/src/main/resources" includes="Matador*Types.xml"/>
    	</copy>    	
    	
    	<copy toDir="${name}/MATADOR/plugins/languageFiles">
    		<fileset dir="../MatadorApplication/src" includes="**/*messages*.properties"/>
    		<fileset dir="../MatadorAyr/src" includes="**/*messages*.properties"/>
    		<fileset dir="../MatadorCfr/src" includes="**/*messages*.properties"/>
    		<fileset dir="../MatadorCommons/src" includes="**/*messages*.properties"/>
    		<fileset dir="../MatadorCommunication/src" includes="**/*messages*.properties"/>
    		<fileset dir="../MatadorIff/src" includes="**/*messages*.properties"/>
    		<fileset dir="../MatadorPlt/src" includes="**/*messages*.properties"/>
    		<fileset dir="../MatadorRapor/src" includes="**/*messages*.properties"/>
    		<fileset dir="../MatadorScope/src" includes="**/*messages*.properties"/>
    	</copy>
    	
    	<copy toDir="${name}/RODEO/plugins">
    		<fileset dir="plugins" includes="MatadorCommons*"/>
    		<fileset dir="plugins" includes="MatadorCommunication*"/>
    		<fileset dir="plugins" includes="Rodeo*"/>
    	</copy>
    	
    	<zip destfile="${name}.zip">
    		<zipfileset filemode="755" dir="${name}"/>
    	</zip>
    	
    	<delete dir="${name}"/>
    	<delete dir="plugins"/>
    	
    	<replace file="../MatadorCommons/src/com/aselsan/matador/configurationservice/impl/ConfigurationService.java" 
    		token="${version}" value="X.X.X"/>
    	
    	<replace file="../Rodeo/src/tr/com/t2/matador/rodeo/main/RodeoMainWindow.java" 
    		token="${version}" value="X.X.X"/>
    	
    </target>
</project>
